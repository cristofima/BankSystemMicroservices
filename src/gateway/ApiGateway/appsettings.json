{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Yarp": "Information"
    }
  },
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console" ],
    "MinimumLevel": "Information",
    "WriteTo": [
      { "Name": "Console" }
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithProcessId", "WithThreadId" ],
    "Properties": {
      "ApplicationName": "ApiGateway"
    }
  },
  "AllowedHosts": "*",
  "Gateway": {
    "Name": "Bank System API Gateway",
    "Version": "1.0.0",
    "EnableSwagger": true,
    "SwaggerEndpoint": "/swagger/v1/swagger.json",
    "EnableHealthChecks": true,
    "HealthCheckEndpoint": "/health",
    "EnableMetrics": true,
    "MetricsEndpoint": "/metrics",
    "Cors": {
      "AllowedOrigins": [
        "https://localhost:3000",
        "https://localhost:4200"
      ],
      "AllowedMethods": [
        "GET",
        "POST",
        "PUT",
        "DELETE",
        "PATCH",
        "OPTIONS"
      ],
      "AllowedHeaders": [
        "Content-Type",
        "Authorization",
        "Accept",
        "X-Correlation-ID"
      ],
      "AllowCredentials": true,
      "PreflightMaxAge": 86400
    },
    "RateLimiting": {
      "Global": {
        "PermitLimit": 1000,
        "Window": "00:01:00",
        "QueueProcessingOrder": "OldestFirst",
        "QueueLimit": 100
      },
      "PerUser": {
        "PermitLimit": 100,
        "Window": "00:01:00",
        "QueueProcessingOrder": "OldestFirst",
        "QueueLimit": 10
      },
      "Api": {
        "PermitLimit": 200,
        "Window": "00:01:00",
        "QueueProcessingOrder": "OldestFirst",
        "QueueLimit": 20
      }
    },
    "CircuitBreaker": {
      "HandledEventsAllowedBeforeBreaking": 5,
      "DurationOfBreak": "00:00:30",
      "SamplingDuration": "00:01:00",
      "MinimumThroughput": 10,
      "FailureThreshold": 0.5
    },
    "Retry": {
      "RetryCount": 3,
      "BaseDelay": "00:00:01",
      "MaxDelay": "00:00:10",
      "BackoffType": "Exponential"
    },
    "Timeout": {
      "RequestTimeout": "00:00:30",
      "KeepAliveTimeout": "00:01:00"
    },
    "Security": {
      "EnableHttpsRedirection": true,
      "RequireHttps": true,
      "EnableHsts": true,
      "HstsMaxAge": 31536000,
      "EnableXContentTypeOptions": true,
      "EnableXFrameOptions": true,
      "XFrameOptionsValue": "DENY",
      "EnableXssProtection": true,
      "EnableReferrerPolicy": true,
      "ReferrerPolicyValue": "strict-origin-when-cross-origin"
    }
  },
  "HealthChecks": {
    "TimeoutSeconds": 10,
    "Self": {
      "Name": "self",
      "Message": "The API Gateway is healthy and operational"
    },
    "Services": [
      {
        "Name": "security-api",
        "Uri": "http://localhost:5153/health",
        "DisplayName": "Security API Health Check",
        "TimeoutSeconds": 10,
        "FailureStatus": "Degraded",
        "Tags": [ "security", "authentication" ]
      },
      {
        "Name": "account-api",
        "Uri": "http://localhost:5069/health",
        "DisplayName": "Account API Health Check",
        "TimeoutSeconds": 10,
        "FailureStatus": "Degraded",
        "Tags": [ "accounts", "core" ]
      }
    ]
  },
  "Authentication": {
    "Jwt": {
      "ValidateIssuer": true,
      "ValidateAudience": true,
      "ValidateLifetime": true,
      "ValidateIssuerSigningKey": true,
      "ClockSkew": "00:00:00"
    },
    "RequireHttpsMetadata": true,
    "SaveToken": true
  }
}